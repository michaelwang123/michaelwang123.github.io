{{- /* Head custom content area start */ -}}
{{- /*     Insert any custom code (web-analytics, resources, etc.) - it will appear in the <head></head> section of every page. */ -}}
{{- /*     Can be overwritten by partial with the same name in the global layouts. */ -}}

<!-- Mermaid CSS styles -->
<style>
.mermaid {
  text-align: center;
  margin: 2rem auto;
  max-width: 100%;
  overflow-x: auto;
}

.mermaid svg {
  max-width: 100%;
  height: auto;
}

/* 确保代码块样式 */
pre code.language-mermaid {
  display: none;
}
</style>

<!-- Mermaid.js support -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
      startOnLoad: true,
      theme: 'default',
      themeVariables: {
        primaryColor: '#007acc',
        primaryTextColor: '#fff',
        primaryBorderColor: '#007acc',
        lineColor: '#007acc'
      }
    });
    
    // 查找所有的mermaid代码块并渲染
    const mermaidBlocks = document.querySelectorAll('pre code.language-mermaid');
    mermaidBlocks.forEach((block, index) => {
      const mermaidDiv = document.createElement('div');
      mermaidDiv.className = 'mermaid';
      mermaidDiv.textContent = block.textContent;
      mermaidDiv.setAttribute('id', 'mermaid-' + index);
      block.parentNode.parentNode.replaceChild(mermaidDiv, block.parentNode);
    });
    
    // 重新初始化mermaid以渲染新添加的图表
    if (mermaidBlocks.length > 0) {
      mermaid.init();
    }
  });
</script>

{{- /* Head custom content area end */ -}} 